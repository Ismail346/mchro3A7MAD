<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SHIBA CLAIM - Ø§Ø±Ø¨Ø­ Ù…Ø¬Ø§Ù†Ø§Ù‹</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <!-- Monetag Ads -->
    <script src="https://sdk.monetag.com/?p=10195821"></script>
    <script src='//libtl.com/sdk.js' data-zone='10195821' data-sdk='show_10195821'></script>
    <style>
        @keyframes pulse {
            0%, 100% { opacity: 0.2; transform: scale(1); }
            50% { opacity: 0.4; transform: scale(1.05); }
        }
        @keyframes bounce-custom {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes spin-slow {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        .animate-pulse-bg {
            animation: pulse 3s ease-in-out infinite;
        }
        .animate-bounce-custom {
            animation: bounce-custom 1s ease-in-out infinite;
        }
        .animate-fade-in {
            animation: fade-in 0.5s ease-out;
        }
        .animate-spin-slow {
            animation: spin-slow 3s linear infinite;
        }
        .animate-float {
            animation: float 2s ease-in-out infinite;
        }
        .delay-1000 {
            animation-delay: 1s;
        }
        .delay-2000 {
            animation-delay: 2s;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .status-pending { background: linear-gradient(45deg, #f59e0b, #d97706); }
        .status-approved { background: linear-gradient(45deg, #10b981, #059669); }
        .status-rejected { background: linear-gradient(45deg, #ef4444, #dc2626); }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white min-h-screen overflow-x-hidden">
    <!-- Maintenance Screen -->
    <div id="maintenanceScreen" class="fixed inset-0 bg-gradient-to-br from-gray-900 via-red-900 to-gray-900 z-50 flex items-center justify-center hidden">
        <div class="text-center px-6">
            <div class="w-32 h-32 bg-gradient-to-br from-orange-400 to-red-500 rounded-full mx-auto mb-6 flex items-center justify-center shadow-2xl shadow-orange-500/50 animate-float">
                <svg class="w-16 h-16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                </svg>
            </div>
            <h1 class="text-5xl font-black mb-4 text-orange-400">ğŸ”§ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØªØ­Øª Ø§Ù„ØµÙŠØ§Ù†Ø©</h1>
            <p class="text-xl text-gray-300 mb-8">Ù†Ø¹Ù…Ù„ Ø¹Ù„Ù‰ ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…ÙˆÙ‚Ø¹ØŒ Ø³Ù†Ø¹ÙˆØ¯ Ù‚Ø±ÙŠØ¨Ø§Ù‹!</p>
            <div class="bg-white/10 backdrop-blur-xl px-8 py-4 rounded-2xl border border-white/20 inline-block">
                <p class="text-sm text-gray-300">ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹...</p>
            </div>
        </div>
    </div>
    <!-- Banned Screen -->
    <div id="bannedScreen" class="fixed inset-0 bg-gradient-to-br from-gray-900 via-red-900 to-gray-900 z-50 flex items-center justify-center hidden">
        <div class="text-center px-6">
            <div class="w-32 h-32 bg-gradient-to-br from-red-500 to-pink-600 rounded-full mx-auto mb-6 flex items-center justify-center shadow-2xl shadow-red-500/50">
                <svg class="w-16 h-16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"></path>
                </svg>
            </div>
            <h1 class="text-5xl font-black mb-4 text-red-400">ğŸš« Ø­Ø³Ø§Ø¨ Ù…Ø­Ø¸ÙˆØ±</h1>
            <p class="text-xl text-gray-300 mb-8">ØªÙ… Ø­Ø¸Ø± Ø­Ø³Ø§Ø¨Ùƒ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</p>
            <button onclick="logout()" class="bg-gradient-to-r from-red-500 to-pink-600 px-8 py-4 rounded-2xl font-bold text-lg hover:scale-105 transform transition-all">
                ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬
            </button>
        </div>
    </div>
    <!-- Notifications Screen -->
    <div id="notificationsScreen" class="fixed inset-0 bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 z-50 flex items-center justify-center hidden">
        <div class="relative z-10 w-full max-w-md px-6">
            <div class="bg-black/40 backdrop-blur-2xl border border-white/20 rounded-3xl p-6 shadow-2xl">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold">ğŸ“¨ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</h2>
                    <button onclick="closeNotifications()" class="bg-red-500/20 p-2 rounded-xl hover:bg-red-500/30 transition-all">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div id="notificationsList" class="space-y-3 max-h-96 overflow-y-auto">
                    <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                </div>
            </div>
        </div>
    </div>
    <!-- Contact Admin Modal -->
    <div id="contactAdminModal" class="fixed inset-0 bg-black/80 z-50 hidden items-center justify-center p-4">
        <div class="bg-gradient-to-br from-purple-900 to-blue-900 border border-white/20 rounded-3xl p-6 mx-4 max-w-md w-full max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-2xl font-bold text-yellow-400">ğŸ“ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h2>
                <button onclick="closeContactModal()" class="bg-red-500/20 p-2 rounded-xl hover:bg-red-500/30 transition-all">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <!-- Last Message Info -->
            <div id="lastMessageInfo" class="bg-white/10 p-4 rounded-xl mb-4 hidden">
                <h3 class="font-bold mb-2 text-yellow-400">Ø¢Ø®Ø± Ø±Ø³Ø§Ù„Ø©</h3>
                <p id="lastMessageText" class="text-sm mb-2"></p>
                <p id="lastMessageTime" class="text-xs text-purple-300"></p>
            </div>
            <!-- Contact Form -->
            <div id="contactForm">
                <div class="mb-4">
                    <label class="block text-sm font-bold mb-2 text-purple-200">Ø§Ù„Ø±Ø³Ø§Ù„Ø©</label>
                    <textarea id="contactMessage" rows="4" class="w-full bg-black/30 border-2 border-blue-500/50 rounded-xl px-4 py-3 focus:border-blue-400 focus:outline-none resize-none placeholder:text-blue-400/50" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù„Ù„Ø¥Ø¯Ø§Ø±Ø© Ù‡Ù†Ø§..."></textarea>
                </div>
                <div id="contactTimer" class="bg-yellow-500/20 border border-yellow-400/30 p-4 rounded-xl mb-4 text-center hidden">
                    <p class="text-yellow-400 font-bold mb-2">â° ÙŠØ¬Ø¨ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù‚Ø¨Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©</p>
                    <p id="timerDisplay" class="text-2xl font-bold"></p>
                    <p class="text-sm text-yellow-300 mt-2">ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø£Ø®Ø±Ù‰ Ø¨Ø¹Ø¯:</p>
                </div>
                <button id="sendMessageBtn" onclick="sendMessageToAdmin()" class="w-full bg-gradient-to-r from-green-500 to-emerald-600 py-3 rounded-xl font-bold hover:scale-105 transform transition-all mb-3">
                    Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
                </button>
                <button id="requestExtraMessageBtn" onclick="requestExtraMessage()" class="w-full bg-gradient-to-r from-blue-500 to-purple-600 py-3 rounded-xl font-bold hover:scale-105 transform transition-all hidden">
                    ğŸ“¨ Ø·Ù„Ø¨ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¥Ø¶Ø§ÙÙŠØ©
                </button>
            </div>
            <!-- Messages History -->
            <div class="mt-6 pt-4 border-t border-white/10">
                <h3 class="font-bold mb-3">ğŸ“‹ Ø³Ø¬Ù„ Ø§Ù„Ù…Ø±Ø§Ø³Ù„Ø§Øª</h3>
                <div id="contactHistory" class="space-y-3 max-h-40 overflow-y-auto">
                    <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                </div>
            </div>
        </div>
    </div>
    <!-- Login/Register Screen -->
    <div id="authScreen" class="fixed inset-0 bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 z-50 flex items-center justify-center hidden">
        <!-- Animated Background -->
        <div class="fixed inset-0 overflow-hidden pointer-events-none">
            <div class="absolute top-20 left-10 w-72 h-72 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-pulse-bg"></div>
            <div class="absolute top-40 right-10 w-72 h-72 bg-blue-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-pulse-bg delay-1000"></div>
            <div class="absolute bottom-20 left-1/3 w-72 h-72 bg-indigo-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-pulse-bg delay-2000"></div>
        </div>
        <div class="relative z-10 w-full max-w-md px-6">
            <div class="bg-black/40 backdrop-blur-2xl border border-white/20 rounded-3xl p-8 shadow-2xl">
                <!-- Logo -->
                <div class="text-center mb-8">
                    <div class="w-24 h-24 bg-gradient-to-br from-orange-400 to-pink-500 rounded-full mx-auto mb-4 flex items-center justify-center shadow-2xl shadow-orange-500/50 animate-float">
                        <svg class="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <h1 class="text-4xl font-black mb-2 bg-gradient-to-r from-orange-400 to-pink-500 bg-clip-text text-transparent">SHIBA CLAIM</h1>
                    <p class="text-purple-300">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„Ø¢Ù† Ù…Ø¬Ø§Ù†Ø§Ù‹</p>
                </div>
                <!-- Tabs -->
                <div class="flex gap-2 mb-6">
                    <button onclick="switchAuthTab('login')" id="loginTab" class="flex-1 py-3 px-4 rounded-xl font-bold transition-all bg-gradient-to-r from-blue-500 to-purple-600 shadow-lg">
                        ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„
                    </button>
                    <button onclick="switchAuthTab('register')" id="registerTab" class="flex-1 py-3 px-4 rounded-xl font-bold transition-all bg-white/10 hover:bg-white/20">
                        Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯
                    </button>
                </div>
                <!-- Login Form -->
                <form id="loginForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-bold mb-2 text-purple-200">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
                        <input type="text" id="loginUsername" required
                            class="w-full bg-white/10 border-2 border-white/20 rounded-xl px-4 py-3 focus:border-purple-400 focus:outline-none placeholder:text-white/40"
                            placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
                    </div>
                    <div>
                        <label class="block text-sm font-bold mb-2 text-purple-200">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                        <input type="password" id="loginPassword" required
                            class="w-full bg-white/10 border-2 border-white/20 rounded-xl px-4 py-3 focus:border-purple-400 focus:outline-none placeholder:text-white/40"
                            placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
                    </div>
                    <button type="submit" class="w-full bg-gradient-to-r from-blue-500 to-purple-600 py-4 rounded-xl font-bold text-lg shadow-lg shadow-blue-500/50 hover:scale-105 transform transition-all">
                        Ø¯Ø®ÙˆÙ„
                    </button>
                </form>
                <!-- Register Form -->
                <form id="registerForm" class="space-y-4 hidden">
                    <div>
                        <label class="block text-sm font-bold mb-2 text-purple-200">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
                        <input type="text" id="registerUsername" required minlength="3"
                            class="w-full bg-white/10 border-2 border-white/20 rounded-xl px-4 py-3 focus:border-purple-400 focus:outline-none placeholder:text-white/40"
                            placeholder="Ø§Ø®ØªØ± Ø§Ø³Ù… Ù…Ø³ØªØ®Ø¯Ù… (3 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„)">
                    </div>
                    <div>
                        <label class="block text-sm font-bold mb-2 text-purple-200">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                        <input type="password" id="registerPassword" required minlength="4"
                            class="w-full bg-white/10 border-2 border-white/20 rounded-xl px-4 py-3 focus:border-purple-400 focus:outline-none placeholder:text-white/40"
                            placeholder="Ø§Ø®ØªØ± ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± (4 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„)">
                    </div>
                    <div>
                        <label class="block text-sm font-bold mb-2 text-purple-200">ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                        <input type="password" id="registerPasswordConfirm" required
                            class="w-full bg-white/10 border-2 border-white/20 rounded-xl px-4 py-3 focus:border-purple-400 focus:outline-none placeholder:text-white/40"
                            placeholder="Ø£Ø¹Ø¯ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
                    </div>
                    <button type="submit" class="w-full bg-gradient-to-r from-green-500 to-emerald-600 py-4 rounded-xl font-bold text-lg shadow-lg shadow-green-500/50 hover:scale-105 transform transition-all">
                        Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨
                    </button>
                </form>
                <!-- Message -->
                <div id="authMessage" class="mt-4 p-3 rounded-xl text-center font-bold hidden"></div>
                <!-- Features -->
                <div class="mt-6 pt-6 border-t border-white/10">
                    <p class="text-sm text-purple-300 mb-3 text-center">Ù„Ù…Ø§Ø°Ø§ ØªÙ†Ø¶Ù… Ø¥Ù„ÙŠÙ†Ø§ØŸ</p>
                    <div class="space-y-2">
                        <div class="flex items-center gap-2 text-sm">
                            <svg class="w-5 h-5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <span>Ø§Ø¨Ø¯Ø£ Ù…Ù† Ø§Ù„ØµÙØ± ÙˆØ§Ø±Ø¨Ø­ Ø¨Ø§Ù„Ø¬Ù‡Ø¯ ğŸ’ª</span>
                        </div>
                        <div class="flex items-center gap-2 text-sm">
                            <svg class="w-5 h-5 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <span>Ø´Ø§Ù‡Ø¯ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ÙˆØ§Ø±Ø¨Ø­ 10 Ù†Ù‚Ø§Ø· Ù„ÙƒÙ„ Ø¥Ø¹Ù„Ø§Ù†</span>
                        </div>
                        <div class="flex items-center gap-2 text-sm">
                            <svg class="w-5 h-5 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <span>Ø­ÙˆÙ„ Ø§Ù„Ù†Ù‚Ø§Ø· Ø¥Ù„Ù‰ SHIBA ÙˆØ§Ø³Ø­Ø¨Ù‡Ø§</span>
                        </div>
                    </div>
                </div>
                <!-- Cloud Status -->
                <div class="mt-4 text-center">
                    <div class="inline-flex items-center gap-2 bg-green-500/20 border border-green-400/30 px-4 py-2 rounded-full text-xs">
                        <span class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></span>
                        <span class="text-green-400 font-bold">Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø³Ø­Ø§Ø¨Ø© â˜ï¸</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="fixed inset-0 bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 z-50 flex flex-col items-center justify-center hidden">
        <div class="text-center px-6">
            <div class="relative mb-8">
                <div class="w-32 h-32 bg-gradient-to-br from-orange-400 to-pink-500 rounded-full mx-auto flex items-center justify-center shadow-2xl shadow-orange-500/50 animate-float">
                    <svg class="w-16 h-16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </div>
                <div class="absolute inset-0 -m-4 border-4 border-orange-400/30 rounded-full animate-spin-slow"></div>
                <div class="absolute inset-0 -m-6 border-4 border-pink-500/20 rounded-full animate-spin-slow" style="animation-duration: 4s; animation-direction: reverse;"></div>
            </div>
            <h1 class="text-5xl font-black mb-4 bg-gradient-to-r from-orange-400 to-pink-500 bg-clip-text text-transparent">SHIBA CLAIM</h1>
            <p class="text-xl text-purple-300 mb-8">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø­Ø³Ø§Ø¨Ùƒ...</p>
            <div class="w-64 h-3 bg-white/20 rounded-full overflow-hidden mx-auto mb-4">
                <div id="loadingBar" class="h-full bg-gradient-to-r from-orange-400 to-pink-500 w-0 transition-all duration-500 rounded-full"></div>
            </div>
        </div>
    </div>
    <!-- Global Announcement Popup -->
    <div id="announcementPopup" class="fixed inset-0 bg-black/80 z-50 hidden items-center justify-center">
        <div class="bg-gradient-to-br from-purple-900 to-blue-900 border border-white/20 rounded-3xl p-6 mx-4 max-w-md w-full">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-2xl font-bold text-yellow-400">ğŸ“¢ Ø¥Ø¹Ù„Ø§Ù† Ù‡Ø§Ù…</h2>
                <button onclick="closeAnnouncement()" class="bg-red-500/20 p-2 rounded-xl hover:bg-red-500/30 transition-all">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div id="announcementContent" class="text-lg mb-6">
                <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
            </div>
            <button onclick="closeAnnouncement()" class="w-full bg-gradient-to-r from-green-500 to-emerald-600 py-3 rounded-xl font-bold hover:scale-105 transform transition-all">
                ÙÙ‡Ù…ØªØŒ Ø´ÙƒØ±Ø§Ù‹!
            </button>
        </div>
    </div>
    <!-- Animated Background -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none">
        <div class="absolute top-20 left-10 w-72 h-72 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-pulse-bg"></div>
        <div class="absolute top-40 right-10 w-72 h-72 bg-blue-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-pulse-bg delay-1000"></div>
        <div class="absolute bottom-20 left-1/3 w-72 h-72 bg-indigo-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-pulse-bg delay-2000"></div>
    </div>
    <!-- Main Container -->
    <div id="app" class="relative z-10 flex flex-col min-h-screen pb-24 hidden">
        <!-- Header -->
        <div class="p-6 pb-4">
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center gap-3">
                    <div class="w-12 h-12 bg-gradient-to-br from-orange-400 to-pink-500 rounded-2xl flex items-center justify-center shadow-lg shadow-orange-500/50 animate-bounce-custom">
                        <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-2xl font-black tracking-tight">SHIBA CLAIM</h1>
                        <p class="text-xs text-purple-300" id="currentUsername">Ù…Ø±Ø­Ø¨Ø§Ù‹</p>
                    </div>
                </div>
                <div class="flex items-center gap-2">
                    <!-- Notifications Button -->
                    <button onclick="showNotifications()" id="notificationsBtn" class="relative bg-purple-500/20 backdrop-blur-xl p-3 rounded-2xl border border-purple-400/30 hover:bg-purple-500/30 transition-all" title="Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                        </svg>
                        <span id="notificationsCount" class="absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 text-xs flex items-center justify-center hidden">0</span>
                    </button>
                    <div class="bg-white/10 backdrop-blur-xl px-4 py-2 rounded-2xl border border-white/20 shadow-xl">
                        <p class="text-xs text-purple-200">Ø§Ù„Ù†Ù‚Ø§Ø·</p>
                        <p class="text-xl font-bold" id="points">0</p>
                    </div>
                </div>
            </div>
            <!-- Balance Card -->
            <div class="bg-gradient-to-r from-orange-500 via-pink-500 to-purple-600 p-6 rounded-3xl shadow-2xl shadow-purple-500/50 border border-white/20">
                <p class="text-sm opacity-90 mb-1">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø±ØµÙŠØ¯Ùƒ</p>
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <p class="text-4xl font-black" id="balance">0</p>
                        <span class="text-2xl font-bold">SHIBA</span>
                    </div>
                    <svg class="w-10 h-10 opacity-80" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                    </svg>
                </div>
            </div>
        </div>
        <!-- Content Area -->
        <div class="flex-1 overflow-y-auto px-6" id="content"></div>
        <!-- Bottom Navigation -->
        <div class="fixed bottom-0 left-0 right-0 bg-black/40 backdrop-blur-2xl border-t border-white/10 p-4">
            <div class="flex items-center justify-around max-w-md mx-auto">
                <button onclick="showPage('claim')" class="nav-btn flex flex-col items-center gap-1 px-4 py-3 rounded-2xl transition-all hover:bg-white/10" data-page="claim">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"></path>
                    </svg>
                    <span class="text-xs font-bold">Ø§Ù„Ø³Ø­Ø¨</span>
                </button>
                <button onclick="showPage('home')" class="nav-btn flex flex-col items-center gap-1 px-4 py-3 rounded-2xl transition-all hover:bg-white/10 bg-gradient-to-r from-blue-500 to-purple-600 shadow-lg shadow-blue-500/50 scale-110" data-page="home">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                    </svg>
                    <span class="text-xs font-bold">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
                </button>
                <button onclick="showPage('referral')" class="nav-btn flex flex-col items-center gap-1 px-4 py-3 rounded-2xl transition-all hover:bg-white/10" data-page="referral">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                    </svg>
                    <span class="text-xs font-bold">Ø§Ù„Ø¥Ø­Ø§Ù„Ø©</span>
                </button>
                <!-- New Profile Button -->
                <button onclick="showPage('profile')" class="nav-btn flex flex-col items-center gap-1 px-4 py-3 rounded-2xl transition-all hover:bg-white/10" data-page="profile">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                    <span class="text-xs font-bold">Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„</span>
                </button>
            </div>
        </div>
    </div>
    <!-- Toast Notification -->
    <div id="toast" class="fixed top-8 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-green-500 to-emerald-600 px-8 py-4 rounded-2xl shadow-2xl shadow-green-500/50 z-50 hidden">
        <div class="flex items-center gap-3">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <p class="font-bold text-lg" id="toastMsg">ØªÙ… Ø¨Ù†Ø¬Ø§Ø­!</p>
        </div>
    </div>
    <script>
        // ====== FIREBASE CONFIGURATION ======
        const firebaseConfig = {
            apiKey: "AIzaSyBI3smI8Xjywi8Reo7lnmSSLI_AlO5Xz0c",
            databaseURL: "https://ahmd-ismail-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "ahmd-ismail"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        // ====== AD LIMIT SYSTEM ======
        const MAX_ADS_PER_12H = 100;
        const TWELVE_HOURS_MS = 12 * 60 * 60 * 1000;
        // Compute current ad count in last 12 hours
        function getAdCountInLast12Hours(userData) {
            const now = Date.now();
            let count = 0;
            const adSessions = userData.adSessions || {};
            for (const [start, sessionCount] of Object.entries(adSessions)) {
                const startTime = parseInt(start);
                if (now - startTime < TWELVE_HOURS_MS) {
                    count += sessionCount;
                }
            }
            return count;
        }
        // Clean old sessions (optional optimization)
        function cleanOldAdSessions(userData) {
            const now = Date.now();
            const adSessions = { ...userData.adSessions };
            for (const start of Object.keys(adSessions)) {
                if (now - parseInt(start) >= TWELVE_HOURS_MS) {
                    delete adSessions[start];
                }
            }
            return adSessions;
        }
        // Check if user can watch another ad
        function canWatchAd(userData) {
            const currentCount = getAdCountInLast12Hours(userData);
            return currentCount < MAX_ADS_PER_12H;
        }
        // Record ad watch
        async function recordAdWatch(username) {
            try {
                const userRef = database.ref('users/' + username);
                const snapshot = await userRef.once('value');
                let userData = snapshot.val() || {};
                // Clean old sessions
                userData.adSessions = cleanOldAdSessions(userData);
                const now = Date.now();
                let foundSession = false;
                // Find any active session within last 12h
                for (const start of Object.keys(userData.adSessions)) {
                    if (now - parseInt(start) < TWELVE_HOURS_MS) {
                        userData.adSessions[start] += 1;
                        foundSession = true;
                        break;
                    }
                }
                if (!foundSession) {
                    // Start new session
                    userData.adSessions[now] = 1;
                }
                await userRef.update({ adSessions: userData.adSessions });
                currentUser.adSessions = userData.adSessions;
                return true;
            } catch (error) {
                console.error('Error recording ad watch:', error);
                return false;
            }
        }
        // ====== MONETAG AD SYSTEM Ù…Ø¹ Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø²Ù…Ù†ÙŠØ© (7 Ø«ÙˆØ§Ù†Ù) ======
        let adWatchStartTime = null;

        function tryWatchAd() {
            if (!currentUser) {
                showToast('âš ï¸ ØºÙŠØ± Ù…Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„', true);
                return;
            }
            if (!canWatchAd(currentUser)) {
                showToast('âš ï¸ Ù„Ù‚Ø¯ ÙˆØµÙ„Øª Ù„Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù…Ù† Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª (100 Ø¥Ø¹Ù„Ø§Ù† ÙƒÙ„ 12 Ø³Ø§Ø¹Ø©)', true);
                return;
            }

            // Ø³Ø¬Ù„ ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø¡
            adWatchStartTime = Date.now();

            // Ø¹Ø·Ù‘Ù„ Ø§Ù„Ø²Ø± Ù…Ø¤Ù‚ØªÙ‹Ø§
            const btn = document.getElementById('watchAdBtn');
            if (btn) {
                btn.disabled = true;
                btn.textContent = 'Ø¬Ø§Ø±Ù Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†...';
                btn.classList.add('opacity-50', 'cursor-not-allowed');
            }

            // Ø§Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†
            show_10195821({ ymid: currentUsername })
                .then(async () => {
                    const elapsedTime = Date.now() - adWatchStartTime;
                    const minRequiredTime = 7000; // 7 Ø«ÙˆØ§Ù†Ù

                    if (elapsedTime < minRequiredTime) {
                        showToast('âŒ ÙŠØ¬Ø¨ Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù„ÙØªØ±Ø© ÙƒØ§ÙÙŠØ©', true);
                    } else {
                        // Ù…Ù†Ø­ 10 Ù†Ù‚Ø§Ø· Ø¨Ø¹Ø¯ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙƒØ§ÙÙŠ
                        showToast('Ø­ØµÙ„Øª Ø¹Ù„Ù‰ +10 Ù†Ù‚Ø§Ø·! ğŸ‰');
                        const userRef = database.ref('users/' + currentUsername);
                        await userRef.update({
                            points: firebase.database.ServerValue.increment(10),
                            totalAdsWatched: firebase.database.ServerValue.increment(1)
                        });
                        currentUser.points += 10;
                        currentUser.totalAdsWatched = (currentUser.totalAdsWatched || 0) + 1;
                        await recordAdWatch(currentUsername);
                        updateUI();
                        updateAdLimitInfo();
                    }
                })
                .catch((error) => {
                    console.error('Ad watch failed:', error);
                    showToast('âŒ Ù„Ù… ØªÙƒÙ…Ù„ Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†', true);
                })
                .finally(() => {
                    // Ø£Ø¹Ø¯ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø²Ø± Ø¨Ø¹Ø¯ 1.5 Ø«Ø§Ù†ÙŠØ©
                    setTimeout(() => {
                        if (btn) {
                            btn.disabled = false;
                            btn.textContent = 'Ø´Ø§Ù‡Ø¯ Ø¥Ø¹Ù„Ø§Ù† (+10 Ù†Ù‚Ø§Ø·)';
                            btn.classList.remove('opacity-50', 'cursor-not-allowed');
                        }
                    }, 1500);
                });
        }

        // ====== Ø¨Ø§Ù‚ÙŠ Ø£Ù†Ø¸Ù…Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ (ÙƒÙ…Ø§ Ù‡ÙŠ Ø¯ÙˆÙ† ØªØºÙŠÙŠØ± ÙÙŠ Ø§Ù„Ù…Ù†Ø·Ù‚) ======
        // CONTACT, NOTIFICATIONS, IP, MAINTENANCE, AUTH, PROFILE, WITHDRAWAL, UI, TOAST, Ø¥Ù„Ø®

        // ====== CONTACT SYSTEM ======
        let userContactMessages = {};
        let canSendMessage = true;
        let nextMessageTime = 0;
        let extraMessageAllowed = false;
        async function loadUserContactMessages() {
            try {
                const snapshot = await database.ref('contactMessages').orderByChild('username').equalTo(currentUsername).once('value');
                userContactMessages = snapshot.val() || {};
                checkMessageCooldown();
                updateContactUI();
            } catch (error) {
                console.error('Error loading contact messages:', error);
            }
        }
        function checkMessageCooldown() {
            const messagesArray = Object.values(userContactMessages);
            if (messagesArray.length === 0) {
                canSendMessage = true;
                extraMessageAllowed = false;
                return;
            }
            const lastMessage = messagesArray.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))[0];
            const lastMessageTime = new Date(lastMessage.createdAt).getTime();
            const currentTime = new Date().getTime();
            const eightHours = 8 * 60 * 60 * 1000;
            nextMessageTime = lastMessageTime + eightHours;
            if (currentTime >= nextMessageTime) {
                canSendMessage = true;
                extraMessageAllowed = false;
            } else {
                canSendMessage = false;
                extraMessageAllowed = lastMessage.extraMessageAllowed || false;
            }
            updateContactUI();
        }
        function updateContactUI() {
            const sendBtn = document.getElementById('sendMessageBtn');
            const timerDiv = document.getElementById('contactTimer');
            const requestBtn = document.getElementById('requestExtraMessageBtn');
            const lastMessageInfo = document.getElementById('lastMessageInfo');
            if (canSendMessage) {
                sendBtn.disabled = false;
                sendBtn.className = 'w-full bg-gradient-to-r from-green-500 to-emerald-600 py-3 rounded-xl font-bold hover:scale-105 transform transition-all mb-3';
                timerDiv.classList.add('hidden');
                requestBtn.classList.add('hidden');
            } else {
                sendBtn.disabled = true;
                sendBtn.className = 'w-full bg-gray-600 py-3 rounded-xl font-bold opacity-50 cursor-not-allowed mb-3';
                timerDiv.classList.remove('hidden');
                if (extraMessageAllowed) {
                    requestBtn.classList.remove('hidden');
                    requestBtn.className = 'w-full bg-gradient-to-r from-blue-500 to-purple-600 py-3 rounded-xl font-bold hover:scale-105 transform transition-all';
                } else {
                    requestBtn.classList.add('hidden');
                }
                updateTimer();
            }
            const messagesArray = Object.values(userContactMessages);
            if (messagesArray.length > 0) {
                const lastMessage = messagesArray.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))[0];
                document.getElementById('lastMessageText').textContent = lastMessage.message;
                document.getElementById('lastMessageTime').textContent = `Ø¢Ø®Ø± Ø±Ø³Ø§Ù„Ø©: ${new Date(lastMessage.createdAt).toLocaleString('ar-EG')}`;
                lastMessageInfo.classList.remove('hidden');
            } else {
                lastMessageInfo.classList.add('hidden');
            }
            updateContactHistory();
        }
        function updateTimer() {
            const currentTime = new Date().getTime();
            const timeLeft = nextMessageTime - currentTime;
            if (timeLeft <= 0) {
                canSendMessage = true;
                updateContactUI();
                return;
            }
            const hours = Math.floor(timeLeft / (1000 * 60 * 60));
            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
            document.getElementById('timerDisplay').textContent = 
                `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        function updateContactHistory() {
            const historyContainer = document.getElementById('contactHistory');
            const messagesArray = Object.values(userContactMessages)
                .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
            if (messagesArray.length === 0) {
                historyContainer.innerHTML = `
                    <div class="text-center py-4 text-purple-300">
                        <p class="text-sm">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ø³Ø§Ø¦Ù„ Ø³Ø§Ø¨Ù‚Ø©</p>
                    </div>
                `;
                return;
            }
            historyContainer.innerHTML = messagesArray.map(message => `
                <div class="bg-black/30 p-3 rounded-xl border border-white/10">
                    <div class="flex items-center justify-between mb-1">
                        <span class="text-xs font-bold">${message.adminReply ? 'ğŸ“¥ Ø±Ø¯ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©' : 'ğŸ“¤ Ø±Ø³Ø§Ù„ØªÙƒ'}</span>
                        <span class="text-xs text-purple-400">${new Date(message.createdAt).toLocaleDateString('ar-EG')}</span>
                    </div>
                    <p class="text-xs mb-1">${message.message}</p>
                    ${message.adminReply ? `
                        <div class="mt-2 p-2 bg-green-500/20 rounded-lg border border-green-400/30">
                            <p class="text-xs text-green-300 font-bold">Ø±Ø¯ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©:</p>
                            <p class="text-xs">${message.adminReply}</p>
                            ${message.repliedAt ? `<p class="text-xs text-green-400 mt-1">${new Date(message.repliedAt).toLocaleDateString('ar-EG')}</p>` : ''}
                        </div>
                    ` : message.status === 'pending' ? `
                        <div class="mt-1">
                            <span class="px-2 py-1 bg-yellow-500/20 text-yellow-400 rounded-full text-xs">â³ Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø±Ø¯</span>
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }
        async function sendMessageToAdmin() {
            const messageText = document.getElementById('contactMessage').value.trim();
            if (!messageText) {
                showToast('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ø±Ø³Ø§Ù„Ø©', true);
                return;
            }
            if (!canSendMessage && !extraMessageAllowed) {
                showToast('â° ÙŠØ¬Ø¨ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± 8 Ø³Ø§Ø¹Ø§Øª Ø¨ÙŠÙ† ÙƒÙ„ Ø±Ø³Ø§Ù„Ø©', true);
                return;
            }
            try {
                const messageId = Date.now().toString();
                const messageData = {
                    id: messageId,
                    username: currentUsername,
                    message: messageText,
                    createdAt: new Date().toISOString(),
                    status: 'pending',
                    extraMessageAllowed: false
                };
                await database.ref('contactMessages/' + messageId).set(messageData);
                extraMessageAllowed = false;
                showToast('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ø¥Ø¯Ø§Ø±Ø© Ø¨Ù†Ø¬Ø§Ø­');
                document.getElementById('contactMessage').value = '';
                closeContactModal();
                loadUserContactMessages();
            } catch (error) {
                console.error('Error sending message:', error);
                showToast('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©', true);
            }
        }
        function requestExtraMessage() {
            showToast('ğŸ“¨ ØªÙ… Ø·Ù„Ø¨ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¥Ø¶Ø§ÙÙŠØ©ØŒ Ø³ÙŠØªÙ… Ù…Ø±Ø§Ø¬Ø¹ØªÙ‡ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©');
        }
        function showContactModal() {
            loadUserContactMessages();
            document.getElementById('contactAdminModal').classList.remove('hidden');
            if (!canSendMessage) {
                setInterval(updateTimer, 1000);
            }
        }
        function closeContactModal() {
            document.getElementById('contactAdminModal').classList.add('hidden');
        }
        function listenForContactUpdates() {
            database.ref('contactMessages').orderByChild('username').equalTo(currentUsername).on('value', (snapshot) => {
                userContactMessages = snapshot.val() || {};
                checkMessageCooldown();
                updateContactUI();
                const messagesWithNewReplies = Object.values(userContactMessages).filter(msg => 
                    msg.adminReply && !msg.isRead
                );
                if (messagesWithNewReplies.length > 0) {
                    showToast(`ğŸ“¥ Ù„Ø¯ÙŠÙƒ ${messagesWithNewReplies.length} Ø±Ø¯ Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©`);
                }
            });
        }
        // ====== GLOBAL ANNOUNCEMENTS SYSTEM ======
        let globalAnnouncements = {};
        let shownAnnouncements = JSON.parse(localStorage.getItem('shownAnnouncements') || '{}');
        async function loadGlobalAnnouncements() {
            try {
                const snapshot = await database.ref('globalAnnouncements').once('value');
                globalAnnouncements = snapshot.val() || {};
                checkNewAnnouncements();
            } catch (error) {
                console.error('Error loading global announcements:', error);
            }
        }
        function checkNewAnnouncements() {
            Object.entries(globalAnnouncements).forEach(([id, announcement]) => {
                if (!shownAnnouncements[id] && announcement.active) {
                    showAnnouncement(announcement);
                    shownAnnouncements[id] = true;
                    localStorage.setItem('shownAnnouncements', JSON.stringify(shownAnnouncements));
                }
            });
        }
        function showAnnouncement(announcement) {
            document.getElementById('announcementContent').textContent = announcement.message;
            document.getElementById('announcementPopup').classList.remove('hidden');
            document.getElementById('announcementPopup').classList.add('flex');
        }
        function closeAnnouncement() {
            document.getElementById('announcementPopup').classList.add('hidden');
            document.getElementById('announcementPopup').classList.remove('flex');
        }
        function listenForAnnouncements() {
            database.ref('globalAnnouncements').on('value', (snapshot) => {
                globalAnnouncements = snapshot.val() || {};
                checkNewAnnouncements();
            });
        }
        // ====== USER IP TRACKING ======
        async function getUserIP() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                return data.ip;
            } catch (error) {
                console.error('Error getting IP:', error);
                return 'unknown';
            }
        }
        async function saveUserIP(username, ip) {
            try {
                const userRef = database.ref('users/' + username);
                const snapshot = await userRef.once('value');
                const userData = snapshot.val() || {};
                const ips = userData.ips || [];
                if (!ips.includes(ip)) {
                    ips.push(ip);
                }
                await userRef.update({
                    currentIP: ip,
                    ips: ips,
                    lastIPUpdate: new Date().toISOString()
                });
                return true;
            } catch (error) {
                console.error('Error saving user IP:', error);
                return false;
            }
        }
        async function checkMultipleAccounts(username, ip) {
            try {
                const usersSnapshot = await database.ref('users').once('value');
                const allUsers = usersSnapshot.val() || {};
                const sameIPUsers = Object.entries(allUsers)
                    .filter(([uname, user]) => 
                        uname !== username && 
                        (user.currentIP === ip || (user.ips && user.ips.includes(ip)))
                    )
                    .map(([uname, user]) => uname);
                if (sameIPUsers.length >= 1) {
                    const alertId = Date.now().toString();
                    const alertData = {
                        id: alertId,
                        type: 'multiple_accounts',
                        ip: ip,
                        users: [...sameIPUsers, username],
                        count: sameIPUsers.length + 1,
                        severity: sameIPUsers.length >= 2 ? 'high' : 'medium',
                        createdAt: new Date().toISOString(),
                        status: 'new'
                    };
                    await database.ref('alerts/' + alertId).set(alertData);
                }
                return sameIPUsers.length;
            } catch (error) {
                console.error('Error checking multiple accounts:', error);
                return 0;
            }
        }
        // ====== NOTIFICATIONS SYSTEM ======
        let userNotifications = {};
        async function loadUserNotifications() {
            try {
                const snapshot = await database.ref('notifications').orderByChild('username').equalTo(currentUsername).once('value');
                userNotifications = snapshot.val() || {};
                updateNotificationsCount();
            } catch (error) {
                console.error('Error loading notifications:', error);
            }
        }
        function updateNotificationsCount() {
            const unreadNotifications = Object.values(userNotifications).filter(notification => !notification.isRead);
            const notificationsCount = document.getElementById('notificationsCount');
            if (unreadNotifications.length > 0) {
                notificationsCount.textContent = unreadNotifications.length;
                notificationsCount.classList.remove('hidden');
            } else {
                notificationsCount.classList.add('hidden');
            }
        }
        function showNotifications() {
            document.getElementById('notificationsScreen').classList.remove('hidden');
            displayNotifications();
        }
        function closeNotifications() {
            document.getElementById('notificationsScreen').classList.add('hidden');
        }
        function displayNotifications() {
            const notificationsList = document.getElementById('notificationsList');
            const notificationsArray = Object.values(userNotifications)
                .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
            if (notificationsArray.length === 0) {
                notificationsList.innerHTML = `
                    <div class="text-center py-8 text-purple-300">
                        <svg class="w-12 h-12 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                        </svg>
                        <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</p>
                    </div>
                `;
                return;
            }
            notificationsList.innerHTML = notificationsArray.map(notification => `
                <div class="bg-white/10 backdrop-blur-xl p-4 rounded-xl border border-white/20 ${notification.isRead ? 'opacity-70' : ''}">
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center gap-2">
                            <span class="font-bold">ğŸ“¨ ${notification.fromAdmin ? 'Ù…Ù† Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©' : 'Ø¥Ø´Ø¹Ø§Ø±'}</span>
                            ${!notification.isRead ? '<span class="w-2 h-2 bg-red-400 rounded-full animate-pulse"></span>' : ''}
                        </div>
                        <span class="text-xs text-purple-300">
                            ${new Date(notification.createdAt).toLocaleDateString('ar-EG')}
                        </span>
                    </div>
                    <p class="text-sm">${notification.message}</p>
                    ${!notification.isRead ? `
                        <button onclick="markNotificationAsRead('${notification.id}')" class="w-full mt-2 bg-green-500/20 border border-green-400/30 px-3 py-1 rounded-lg hover:bg-green-500/30 transition-all text-xs">
                            âœ… ØªØ¹ÙŠÙŠÙ† ÙƒÙ…Ù‚Ø±ÙˆØ¡
                        </button>
                    ` : ''}
                </div>
            `).join('');
        }
        async function markNotificationAsRead(notificationId) {
            try {
                await database.ref('notifications/' + notificationId).update({
                    isRead: true,
                    readAt: new Date().toISOString()
                });
                showToast('ØªÙ… ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± ÙƒÙ…Ù‚Ø±ÙˆØ¡');
            } catch (error) {
                console.error('Error marking notification as read:', error);
            }
        }
        function listenForNotifications() {
            database.ref('notifications').orderByChild('username').equalTo(currentUsername).on('value', (snapshot) => {
                userNotifications = snapshot.val() || {};
                updateNotificationsCount();
                const newNotifications = Object.values(userNotifications).filter(notification => !notification.isRead);
                if (newNotifications.length > 0) {
                    showToast(`ğŸ“¨ Ù„Ø¯ÙŠÙƒ ${newNotifications.length} Ø¥Ø´Ø¹Ø§Ø± Ø¬Ø¯ÙŠØ¯`);
                }
            });
        }
        // ====== MAINTENANCE MODE CHECK ======
        async function checkMaintenanceMode() {
            try {
                const snapshot = await database.ref('maintenance').once('value');
                const maintenance = snapshot.val();
                if (maintenance) {
                    document.getElementById('maintenanceScreen').classList.remove('hidden');
                    document.getElementById('authScreen').classList.add('hidden');
                    document.getElementById('loadingScreen').classList.add('hidden');
                    document.getElementById('app').classList.add('hidden');
                    return true;
                }
                return false;
            } catch (error) {
                console.error('Error checking maintenance mode:', error);
                return false;
            }
        }
        function listenForMaintenance() {
            database.ref('maintenance').on('value', (snapshot) => {
                const maintenance = snapshot.val();
                if (maintenance) {
                    document.getElementById('maintenanceScreen').classList.remove('hidden');
                    document.getElementById('authScreen').classList.add('hidden');
                    document.getElementById('app').classList.add('hidden');
                } else {
                    document.getElementById('maintenanceScreen').classList.add('hidden');
                }
            });
        }
        // ====== USER AUTHENTICATION WITH FIREBASE ======
        let currentUser = null;
        let currentUsername = null;
        async function getUserFromFirebase(username) {
            try {
                const snapshot = await database.ref('users/' + username).once('value');
                return snapshot.val();
            } catch (error) {
                console.error('Error getting user:', error);
                return null;
            }
        }
        async function saveUserToFirebase(username, userData) {
            try {
                await database.ref('users/' + username).set(userData);
                return true;
            } catch (error) {
                console.error('Error saving user:', error);
                return false;
            }
        }
        function switchAuthTab(tab) {
            const loginTab = document.getElementById('loginTab');
            const registerTab = document.getElementById('registerTab');
            const loginForm = document.getElementById('loginForm');
            const registerForm = document.getElementById('registerForm');
            const authMessage = document.getElementById('authMessage');
            authMessage.classList.add('hidden');
            if (tab === 'login') {
                loginTab.className = 'flex-1 py-3 px-4 rounded-xl font-bold transition-all bg-gradient-to-r from-blue-500 to-purple-600 shadow-lg';
                registerTab.className = 'flex-1 py-3 px-4 rounded-xl font-bold transition-all bg-white/10 hover:bg-white/20';
                loginForm.classList.remove('hidden');
                registerForm.classList.add('hidden');
            } else {
                loginTab.className = 'flex-1 py-3 px-4 rounded-xl font-bold transition-all bg-white/10 hover:bg-white/20';
                registerTab.className = 'flex-1 py-3 px-4 rounded-xl font-bold transition-all bg-gradient-to-r from-green-500 to-emerald-600 shadow-lg';
                loginForm.classList.add('hidden');
                registerForm.classList.remove('hidden');
            }
        }
        function showAuthMessage(message, isError = false) {
            const authMessage = document.getElementById('authMessage');
            authMessage.textContent = message;
            authMessage.className = `mt-4 p-3 rounded-xl text-center font-bold ${isError ? 'bg-red-500/20 text-red-400 border border-red-400/30' : 'bg-green-500/20 text-green-400 border border-green-400/30'}`;
            authMessage.classList.remove('hidden');
        }
        document.getElementById('loginForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const isMaintenance = await checkMaintenanceMode();
            if (isMaintenance) return;
            const username = document.getElementById('loginUsername').value.trim();
            const password = document.getElementById('loginPassword').value;
            showAuthMessage('Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...', false);
            const userData = await getUserFromFirebase(username);
            if (userData && userData.password === password) {
                if (userData.isBanned) {
                    showAuthMessage('âŒ Ø­Ø³Ø§Ø¨Ùƒ Ù…Ø­Ø¸ÙˆØ± Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©', true);
                    return;
                }
                const userIP = await getUserIP();
                await saveUserIP(username, userIP);
                await checkMultipleAccounts(username, userIP);
                currentUser = userData;
                currentUsername = username;
                localStorage.setItem('shibaCurrentUser', username);
                showAuthMessage('âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­!');
                setTimeout(() => {
                    document.getElementById('authScreen').classList.add('hidden');
                    startLoadingSequence();
                }, 1000);
            } else {
                showAuthMessage('âŒ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©', true);
            }
        });
        document.getElementById('registerForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const isMaintenance = await checkMaintenanceMode();
            if (isMaintenance) return;
            const username = document.getElementById('registerUsername').value.trim();
            const password = document.getElementById('registerPassword').value;
            const passwordConfirm = document.getElementById('registerPasswordConfirm').value;
            if (password !== passwordConfirm) {
                showAuthMessage('âŒ ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø©', true);
                return;
            }
            showAuthMessage('Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨...', false);
            const existingUser = await getUserFromFirebase(username);
            if (existingUser) {
                showAuthMessage('âŒ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„', true);
                return;
            }
            const userIP = await getUserIP();
            // âœ… ØªØ¹Ø¯ÙŠÙ„ Ø±Ø¦ÙŠØ³ÙŠ: Ù†Ù‚Ø§Ø· Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯ = 0
            const newUser = {
                username: username,
                password: password,
                points: 0,
                balance: 15000,
                referrals: 0,
                totalAdsWatched: 0,
                joinDate: new Date().toISOString(),
                isBanned: false,
                lastLogin: new Date().toISOString(),
                currentIP: userIP,
                ips: [userIP],
                registrationIP: userIP,
                lastIPUpdate: new Date().toISOString(),
                adSessions: {}
            };
            const success = await saveUserToFirebase(username, newUser);
            if (success) {
                await checkMultipleAccounts(username, userIP);
                currentUser = newUser;
                currentUsername = username;
                localStorage.setItem('shibaCurrentUser', username);
                showAuthMessage('âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨! Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ğŸ‰');
                setTimeout(() => {
                    document.getElementById('authScreen').classList.add('hidden');
                    startLoadingSequence();
                }, 1000);
            } else {
                showAuthMessage('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰', true);
            }
        });
        function logout() {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ')) {
                localStorage.removeItem('shibaCurrentUser');
                currentUser = null;
                currentUsername = null;
                document.getElementById('app').classList.add('hidden');
                document.getElementById('authScreen').classList.remove('hidden');
                showToast('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬');
            }
        }
        // Ù„Ø§ Ø­Ø§Ø¬Ø© Ù„Ù€ saveCurrentUser Ù„Ø£Ù†Ù†Ø§ Ù†Ø³ØªØ®Ø¯Ù… update Ù…Ø¨Ø§Ø´Ø±Ø©Ù‹
        // ====== PROFILE SYSTEM ======
        async function loadProfileData() {
            if (!currentUsername) return;
            try {
                const snapshot = await database.ref('users/' + currentUsername).once('value');
                const userData = snapshot.val();
                if (userData) {
                    currentUser = userData;
                    updateProfileUI();
                }
            } catch (error) {
                console.error('Error loading profile data:', error);
            }
        }
        function updateProfileUI() {
            if (!currentUser) return;
            document.getElementById('currentUsername').textContent = `Ù…Ø±Ø­Ø¨Ø§Ù‹ ${currentUser.username}`;
            document.getElementById('points').textContent = currentUser.points.toLocaleString();
            document.getElementById('balance').textContent = currentUser.balance.toLocaleString();
            if (document.getElementById('profileStats')) {
                document.getElementById('profileUsername').textContent = currentUser.username;
                document.getElementById('profileJoinDate').textContent = `Ø¹Ø¶Ùˆ Ù…Ù†Ø° ${new Date(currentUser.joinDate).toLocaleDateString('ar-EG')}`;
                document.getElementById('profilePoints').textContent = currentUser.points.toLocaleString();
                document.getElementById('profileBalance').textContent = currentUser.balance.toLocaleString();
                document.getElementById('profileAds').textContent = (currentUser.totalAdsWatched || 0).toLocaleString();
                document.getElementById('profileReferrals').textContent = (currentUser.referrals || 0).toLocaleString();
            }
        }
        function setupProfileListener() {
            if (!currentUsername) return;
            database.ref('users/' + currentUsername).on('value', (snapshot) => {
                const userData = snapshot.val();
                if (userData) {
                    currentUser = userData;
                    updateProfileUI();
                }
            });
        }
        function loadProfileNotifications() {
            const profileNotifications = document.getElementById('profileNotifications');
            const notificationsArray = Object.values(userNotifications)
                .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))
                .slice(0, 3);
            if (notificationsArray.length === 0) {
                profileNotifications.innerHTML = `
                    <div class="text-center py-4 text-purple-300">
                        <p class="text-sm">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</p>
                    </div>
                `;
                return;
            }
            profileNotifications.innerHTML = notificationsArray.map(notification => `
                <div class="bg-black/30 p-3 rounded-xl border border-white/10 ${notification.isRead ? 'opacity-70' : ''}">
                    <div class="flex items-center justify-between mb-1">
                        <span class="text-xs font-bold">${notification.fromAdmin ? 'Ù…Ù† Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©' : 'Ø¥Ø´Ø¹Ø§Ø±'}</span>
                        ${!notification.isRead ? '<span class="w-2 h-2 bg-red-400 rounded-full animate-pulse"></span>' : ''}
                    </div>
                    <p class="text-xs truncate">${notification.message}</p>
                </div>
            `).join('');
        }
        // ====== WITHDRAWAL REQUESTS SYSTEM ======
        async function submitWithdrawalRequest(amount, walletAddress, shibaAmount) {
            try {
                const userIP = await getUserIP();
                const requestId = Date.now().toString();
                const withdrawalRequest = {
                    id: requestId,
                    username: currentUsername,
                    amount: amount,
                    shibaAmount: shibaAmount,
                    walletAddress: walletAddress,
                    userIP: userIP,
                    status: 'pending',
                    adminComment: '',
                    createdAt: new Date().toISOString(),
                    adsWatched: currentUser.totalAdsWatched
                };
                await database.ref('withdrawalRequests/' + requestId).set(withdrawalRequest);
                return true;
            } catch (error) {
                console.error('Error submitting withdrawal request:', error);
                return false;
            }
        }
        async function getUserWithdrawalRequests() {
            try {
                const snapshot = await database.ref('withdrawalRequests').orderByChild('username').equalTo(currentUsername).once('value');
                return snapshot.val() || {};
            } catch (error) {
                console.error('Error getting withdrawal requests:', error);
                return {};
            }
        }
        function listenForWithdrawalUpdates() {
            database.ref('withdrawalRequests').orderByChild('username').equalTo(currentUsername).on('value', (snapshot) => {
                const requests = snapshot.val() || {};
                updateWithdrawalRequestsUI(requests);
            });
        }
        function updateWithdrawalRequestsUI(requests) {
            const requestsList = document.getElementById('withdrawalRequestsList');
            if (!requestsList) return;
            const requestsArray = Object.values(requests).sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
            if (requestsArray.length === 0) {
                requestsList.innerHTML = `
                    <div class="text-center py-8 text-purple-300">
                        <svg class="w-12 h-12 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø³Ø­Ø¨ Ø³Ø§Ø¨Ù‚Ø©</p>
                    </div>
                `;
                return;
            }
            requestsList.innerHTML = requestsArray.map(request => `
                <div class="bg-white/10 backdrop-blur-xl p-4 rounded-2xl border border-white/20 mb-3">
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center gap-2">
                            <span class="text-lg font-bold">${request.shibaAmount.toLocaleString()} SHIBA</span>
                            <span class="text-sm text-purple-300">(${request.amount.toLocaleString()} Ù†Ù‚Ø·Ø©)</span>
                        </div>
                        <span class="px-3 py-1 rounded-full text-xs font-bold status-${request.status}">
                            ${request.status === 'pending' ? 'â³ Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±' : 
                              request.status === 'approved' ? 'âœ… Ù…Ù‚Ø¨ÙˆÙ„' : 'âŒ Ù…Ø±ÙÙˆØ¶'}
                        </span>
                    </div>
                    <div class="text-sm text-purple-300 mb-2">
                        <div>Ø§Ù„Ù…Ø­ÙØ¸Ø©: ${request.walletAddress}</div>
                        <div>Ø§Ù„ØªØ§Ø±ÙŠØ®: ${new Date(request.createdAt).toLocaleDateString('ar-EG')}</div>
                        <div>Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª: ${request.adsWatched} Ø¥Ø¹Ù„Ø§Ù†</div>
                    </div>
                    ${request.adminComment ? `
                        <div class="mt-2 p-2 bg-yellow-500/20 rounded-lg border border-yellow-400/30">
                            <p class="text-xs text-yellow-300 font-bold">ØªØ¹Ù„ÙŠÙ‚ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©:</p>
                            <p class="text-sm">${request.adminComment}</p>
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }
        // ====== ORIGINAL APP CODE ======
        let state = { page: 'home' };
        const pages = {
            home: `
                <div class="space-y-4 animate-fade-in">
                    <div class="bg-white/10 backdrop-blur-xl p-6 rounded-3xl border border-white/20 shadow-xl">
                        <div class="flex items-center gap-3 mb-4">
                            <svg class="w-6 h-6 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                            <h2 class="text-xl font-bold">Ø§Ø±Ø¨Ø­ Ø§Ù„Ù…Ø²ÙŠØ¯</h2>
                        </div>
                        <div class="mb-4 bg-blue-500/20 border border-blue-400/30 p-3 rounded-xl text-center flex items-center justify-between">
                            <p class="text-sm font-bold" id="adLimitInfo">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
                            <button onclick="refreshAdLimit()" id="refreshAdBtn" class="bg-blue-500/30 hover:bg-blue-500/40 p-1.5 rounded-lg transition-all">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                </svg>
                            </button>
                        </div>
                        <div class="space-y-3">
                            <button id="watchAdBtn" onclick="tryWatchAd()" class="w-full bg-gradient-to-r from-green-500 to-emerald-600 p-4 rounded-2xl font-bold text-lg shadow-lg shadow-green-500/50 hover:scale-105 transform transition-all active:scale-95 flex items-center justify-between">
                                <span>Ø´Ø§Ù‡Ø¯ Ø¥Ø¹Ù„Ø§Ù† (+10 Ù†Ù‚Ø§Ø·)</span>
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"></path>
                                </svg>
                            </button>
                            <div class="grid grid-cols-2 gap-3">
                                <div class="bg-blue-500/20 border border-blue-400/30 p-4 rounded-xl text-center">
                                    <p class="text-3xl font-bold mb-1">+100</p>
                                    <p class="text-xs opacity-80">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ ÙŠÙˆÙ…ÙŠ</p>
                                </div>
                                <div class="bg-purple-500/20 border border-purple-400/30 p-4 rounded-xl text-center">
                                    <p class="text-3xl font-bold mb-1">${currentUser ? currentUser.referrals : 0}</p>
                                    <p class="text-xs opacity-80">Ø¥Ø­Ø§Ù„Ø§Øª Ù†Ø´Ø·Ø©</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-gradient-to-br from-blue-500/20 to-purple-500/20 backdrop-blur-xl p-5 rounded-2xl border border-white/20">
                            <div class="w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center mb-3">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                            <h3 class="font-bold mb-1">Ù…Ù‡Ø§Ù… ÙŠÙˆÙ…ÙŠØ©</h3>
                            <p class="text-xs opacity-70">Ø£ÙƒÙ…Ù„ Ø§Ù„Ù…Ù‡Ø§Ù… ÙˆØ§Ø±Ø¨Ø­</p>
                        </div>
                        <div class="bg-gradient-to-br from-pink-500/20 to-orange-500/20 backdrop-blur-xl p-5 rounded-2xl border border-white/20">
                            <div class="w-12 h-12 bg-pink-500 rounded-xl flex items-center justify-center mb-3">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                                </svg>
                            </div>
                            <h3 class="font-bold mb-1">Ø§Ø¯Ø¹ Ø£ØµØ¯Ù‚Ø§Ø¡</h3>
                            <p class="text-xs opacity-70">20% Ù…Ù† Ø£Ø±Ø¨Ø§Ø­Ù‡Ù…</p>
                        </div>
                    </div>
                </div>
            `,
            claim: `
                <div class="space-y-4 animate-fade-in">
                    <div class="bg-gradient-to-br from-orange-500/20 to-pink-500/20 backdrop-blur-xl p-8 rounded-3xl border border-white/20 shadow-2xl">
                        <div class="w-20 h-20 bg-gradient-to-br from-orange-400 to-pink-500 rounded-full mx-auto mb-4 flex items-center justify-center shadow-lg shadow-orange-500/50">
                            <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"></path>
                            </svg>
                        </div>
                        <h2 class="text-3xl font-black mb-2 text-center">Ø§Ø³Ø­Ø¨ Ù…ÙƒØ§ÙØ£ØªÙƒ!</h2>
                        <p class="text-purple-200 mb-6 text-center">Ø­ÙˆÙ„ Ù†Ù‚Ø§Ø·Ùƒ Ø¥Ù„Ù‰ Shiba</p>
                        <div class="bg-black/30 p-6 rounded-2xl mb-6 border border-white/10">
                            <div class="flex items-center justify-center gap-4 text-2xl font-bold">
                                <span class="text-yellow-400">1000 Ù†Ù‚Ø·Ø©</span>
                                <span class="text-purple-300">=</span>
                                <span class="text-green-400">3000 SHIBA</span>
                            </div>
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-bold mb-2 text-purple-200">
                                Ø§Ù„Ù…Ø¨Ù„Øº Ø¨Ø§Ù„Ù†Ù‚Ø§Ø· (ÙÙ‚Ø· Ù…Ø¶Ø§Ø¹ÙØ§Øª 1000)
                            </label>
                            <input type="number" id="withdrawAmount" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº (Ù…Ø«Ø§Ù„: 1000, 2000, 3000)"
                                class="w-full bg-black/30 border-2 border-purple-500/50 rounded-2xl px-4 py-4 text-xl font-bold text-center focus:border-purple-400 focus:outline-none placeholder:text-purple-400/50"
                                oninput="validateWithdraw()">
                            <p id="amountError" class="text-red-400 text-sm mt-2 text-center hidden">âš ï¸ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ù…Ø¨Ù„Øº Ù…Ù† Ù…Ø¶Ø§Ø¹ÙØ§Øª 1000</p>
                        </div>
                        <div class="mb-6">
                            <label class="block text-sm font-bold mb-2 text-purple-200">
                                Ø¹Ù†ÙˆØ§Ù† Ù…Ø­ÙØ¸Ø© Shiba
                            </label>
                            <input type="text" id="walletAddress" placeholder="0x..."
                                class="w-full bg-black/30 border-2 border-blue-500/50 rounded-2xl px-4 py-4 text-lg font-mono focus:border-blue-400 focus:outline-none placeholder:text-blue-400/50"
                                oninput="validateWithdraw()">
                            <p id="walletError" class="text-yellow-400 text-sm mt-2 text-center hidden">âš ï¸ ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø© Ø§Ù„ØµØ­ÙŠØ­</p>
                        </div>
                        <button id="claimBtn" onclick="handleClaim()" disabled
                            class="w-full p-5 rounded-2xl font-bold text-xl shadow-2xl transform transition-all bg-gray-600 opacity-50 cursor-not-allowed">
                            Ø£Ø¯Ø®Ù„ Ù…Ø¨Ù„ØºØ§Ù‹ ØµØ­ÙŠØ­Ø§Ù‹
                        </button>
                        <p class="text-sm text-purple-300 mt-4 text-center">
                            Ø±ØµÙŠØ¯Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ: <span id="claimPoints">${currentUser ? currentUser.points : 0}</span> Ù†Ù‚Ø·Ø©
                        </p>
                    </div>
                    <div class="bg-white/10 backdrop-blur-xl p-5 rounded-2xl border border-white/20">
                        <h3 class="font-bold mb-3 flex items-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø³Ø­Ø¨ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
                        </h3>
                        <div id="withdrawalRequestsList" class="space-y-2 max-h-60 overflow-y-auto">
                        </div>
                    </div>
                </div>
            `,
            referral: `
                <div class="space-y-4 animate-fade-in">
                    <div class="bg-gradient-to-br from-purple-500/20 to-pink-500/20 backdrop-blur-xl p-8 rounded-3xl border border-white/20 shadow-2xl text-center">
                        <div class="w-20 h-20 bg-gradient-to-br from-purple-400 to-pink-500 rounded-full mx-auto mb-4 flex items-center justify-center shadow-lg shadow-purple-500/50">
                            <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                            </svg>
                        </div>
                        <h2 class="text-3xl font-black mb-2">Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ø¥Ø­Ø§Ù„Ø©</h2>
                        <p class="text-purple-200 mb-6">Ø§Ø¯Ø¹ Ø£ØµØ¯Ù‚Ø§Ø¡Ùƒ ÙˆØ§Ø±Ø¨Ø­ Ù…Ø¹Ù‡Ù…</p>
                        <div class="bg-gradient-to-r from-orange-500 to-pink-500 p-6 rounded-2xl mb-6 shadow-xl">
                            <p class="text-5xl font-black mb-2">20%</p>
                            <p class="text-lg font-bold">Ù…Ù† Ø£Ø±Ø¨Ø§Ø­ ÙƒÙ„ Ø¥Ø­Ø§Ù„Ø©</p>
                        </div>
                        <div class="bg-black/30 p-4 rounded-2xl mb-4 border border-white/10">
                            <p class="text-xs text-purple-300 mb-2">Ø±Ø§Ø¨Ø· Ø§Ù„Ø¥Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ</p>
                            <div class="flex items-center gap-2">
                                <div class="flex-1 bg-white/10 px-4 py-3 rounded-xl text-sm font-mono truncate">
                                    https://shiba.app/ref/${currentUser ? currentUser.username : 'USER'}
                                </div>
                                <button onclick="copyReferral()" class="bg-blue-500 p-3 rounded-xl hover:bg-blue-600 transition-colors">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <button class="w-full bg-gradient-to-r from-blue-500 to-purple-600 p-4 rounded-2xl font-bold shadow-lg shadow-blue-500/50 hover:scale-105 transform transition-all active:scale-95">
                            Ø´Ø§Ø±Ùƒ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø¢Ù†
                        </button>
                    </div>
                    <div class="grid grid-cols-3 gap-3">
                        <div class="bg-white/10 backdrop-blur-xl p-4 rounded-xl border border-white/20 text-center">
                            <p class="text-2xl font-bold text-green-400">${currentUser ? currentUser.referrals : 0}</p>
                            <p class="text-xs text-purple-300 mt-1">Ø¥Ø­Ø§Ù„Ø§Øª</p>
                        </div>
                        <div class="bg-white/10 backdrop-blur-xl p-4 rounded-xl border border-white/20 text-center">
                            <p class="text-2xl font-bold text-blue-400">2,400</p>
                            <p class="text-xs text-purple-300 mt-1">Ø£Ø±Ø¨Ø§Ø­</p>
                        </div>
                        <div class="bg-white/10 backdrop-blur-xl p-4 rounded-xl border border-white/20 text-center">
                            <p class="text-2xl font-bold text-purple-400">8</p>
                            <p class="text-xs text-purple-300 mt-1">Ù†Ø´Ø·Ø©</p>
                        </div>
                    </div>
                    <div class="bg-white/10 backdrop-blur-xl p-5 rounded-2xl border border-white/20">
                        <h3 class="font-bold mb-4">ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ØŸ</h3>
                        <div class="space-y-3">
                            <div class="flex gap-3">
                                <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 font-bold">1</div>
                                <div>
                                    <p class="font-semibold">Ø´Ø§Ø±Ùƒ Ø±Ø§Ø¨Ø·Ùƒ</p>
                                    <p class="text-xs text-purple-300">Ø£Ø±Ø³Ù„ Ø§Ù„Ø±Ø§Ø¨Ø· Ù„Ø£ØµØ¯Ù‚Ø§Ø¦Ùƒ</p>
                                </div>
                            </div>
                            <div class="flex gap-3">
                                <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center flex-shrink-0 font-bold">2</div>
                                <div>
                                    <p class="font-semibold">ÙŠØ³Ø¬Ù„ÙˆÙ† Ø§Ù„Ø¯Ø®ÙˆÙ„</p>
                                    <p class="text-xs text-purple-300">Ø¹Ù†Ø¯Ù…Ø§ ÙŠØ³ØªØ®Ø¯Ù…ÙˆÙ† Ø±Ø§Ø¨Ø·Ùƒ</p>
                                </div>
                            </div>
                            <div class="flex gap-3">
                                <div class="w-8 h-8 bg-pink-500 rounded-full flex items-center justify-center flex-shrink-0 font-bold">3</div>
                                <div>
                                    <p class="font-semibold">ØªØ­ØµÙ„ Ø¹Ù„Ù‰ 20%</p>
                                    <p class="text-xs text-purple-300">Ù…Ù† ÙƒÙ„ Ø£Ø±Ø¨Ø§Ø­Ù‡Ù… Ù…Ø¯Ù‰ Ø§Ù„Ø­ÙŠØ§Ø©</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `,
            profile: `
                <div class="space-y-4 animate-fade-in">
                    <div class="bg-gradient-to-br from-purple-500/20 to-pink-500/20 backdrop-blur-xl p-6 rounded-3xl border border-white/20 text-center">
                        <div class="w-24 h-24 bg-gradient-to-br from-purple-400 to-pink-500 rounded-full mx-auto mb-4 flex items-center justify-center shadow-lg shadow-purple-500/50">
                            <svg class="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                        </div>
                        <h2 class="text-2xl font-bold mb-2" id="profileUsername">${currentUser ? currentUser.username : 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…'}</h2>
                        <p class="text-purple-300" id="profileJoinDate">Ø¹Ø¶Ùˆ Ù…Ù†Ø° ${currentUser ? new Date(currentUser.joinDate).toLocaleDateString('ar-EG') : 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}</p>
                    </div>
                    <div class="grid grid-cols-2 gap-4" id="profileStats">
                        <div class="bg-white/10 backdrop-blur-xl p-4 rounded-2xl border border-white/20 text-center">
                            <p class="text-2xl font-bold text-green-400" id="profilePoints">${currentUser ? currentUser.points.toLocaleString() : 0}</p>
                            <p class="text-xs text-purple-300 mt-1">Ø§Ù„Ù†Ù‚Ø§Ø·</p>
                        </div>
                        <div class="bg-white/10 backdrop-blur-xl p-4 rounded-2xl border border-white/20 text-center">
                            <p class="text-2xl font-bold text-blue-400" id="profileBalance">${currentUser ? currentUser.balance.toLocaleString() : 0}</p>
                            <p class="text-xs text-purple-300 mt-1">SHIBA</p>
                        </div>
                        <div class="bg-white/10 backdrop-blur-xl p-4 rounded-2xl border border-white/20 text-center">
                            <p class="text-2xl font-bold text-yellow-400" id="profileAds">${currentUser ? (currentUser.totalAdsWatched || 0).toLocaleString() : 0}</p>
                            <p class="text-xs text-purple-300 mt-1">Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø´Ø§Ù‡Ø¯Ù‡Ø§</p>
                        </div>
                        <div class="bg-white/10 backdrop-blur-xl p-4 rounded-2xl border border-white/20 text-center">
                            <p class="text-2xl font-bold text-purple-400" id="profileReferrals">${currentUser ? (currentUser.referrals || 0).toLocaleString() : 0}</p>
                            <p class="text-xs text-purple-300 mt-1">Ø¥Ø­Ø§Ù„Ø§Øª</p>
                        </div>
                    </div>
                    <div class="bg-white/10 backdrop-blur-xl p-5 rounded-2xl border border-white/20">
                        <h3 class="font-bold text-lg mb-4">ğŸ“Š Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center">
                                <span class="text-purple-300">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:</span>
                                <span class="font-bold">${currentUser ? currentUser.username : 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-purple-300">ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„:</span>
                                <span class="font-bold">${currentUser ? new Date(currentUser.joinDate).toLocaleDateString('ar-EG') : 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-purple-300">Ø¢Ø®Ø± Ø¯Ø®ÙˆÙ„:</span>
                                <span class="font-bold">${currentUser ? new Date(currentUser.lastLogin).toLocaleDateString('ar-EG') : 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-purple-300">Ø§Ù„Ø­Ø§Ù„Ø©:</span>
                                <span class="font-bold ${currentUser && currentUser.isBanned ? 'text-red-400' : 'text-green-400'}">
                                    ${currentUser && currentUser.isBanned ? 'Ù…Ø­Ø¸ÙˆØ±' : 'Ù†Ø´Ø·'}
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white/10 backdrop-blur-xl p-5 rounded-2xl border border-white/20">
                        <h3 class="font-bold text-lg mb-4">ğŸ“ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h3>
                        <p class="text-sm text-purple-300 mb-4">ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ù„Ù„Ø¥Ø¨Ù„Ø§Øº Ø¹Ù† Ù…Ø´Ø§ÙƒÙ„ Ø£Ùˆ Ø§Ø³ØªÙØ³Ø§Ø±Ø§Øª</p>
                        <button onclick="showContactModal()" class="w-full bg-gradient-to-r from-blue-500 to-purple-600 py-3 rounded-xl font-bold hover:scale-105 transform transition-all">
                            ğŸ“¨ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
                        </button>
                    </div>
                    <div class="bg-white/10 backdrop-blur-xl p-5 rounded-2xl border border-white/20">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="font-bold text-lg">ğŸ“¨ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</h3>
                            <button onclick="showNotifications()" class="bg-purple-500/20 px-3 py-1 rounded-lg hover:bg-purple-500/30 transition-all text-sm">
                                Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„
                            </button>
                        </div>
                        <div id="profileNotifications" class="space-y-3 max-h-40 overflow-y-auto">
                        </div>
                    </div>
                    <div class="space-y-3">
                        <button onclick="showNotifications()" class="w-full bg-blue-500/20 border border-blue-400/30 px-4 py-3 rounded-xl hover:bg-blue-500/30 transition-all text-right flex items-center justify-between">
                            <span>Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</span>
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                        </button>
                        <button onclick="logout()" class="w-full bg-red-500/20 border border-red-400/30 px-4 py-3 rounded-xl hover:bg-red-500/30 transition-all text-right flex items-center justify-between">
                            <span>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</span>
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            `
        };
        document.addEventListener('DOMContentLoaded', async function() {
            const isMaintenance = await checkMaintenanceMode();
            if (isMaintenance) {
                listenForMaintenance();
                return;
            }
            const savedUsername = localStorage.getItem('shibaCurrentUser');
            if (savedUsername) {
                const userData = await getUserFromFirebase(savedUsername);
                if (userData) {
                    if (userData.isBanned) {
                        document.getElementById('bannedScreen').classList.remove('hidden');
                        return;
                    }
                    currentUser = userData;
                    currentUsername = savedUsername;
                    startLoadingSequence();
                } else {
                    localStorage.removeItem('shibaCurrentUser');
                    document.getElementById('authScreen').classList.remove('hidden');
                }
            } else {
                document.getElementById('authScreen').classList.remove('hidden');
            }
            listenForMaintenance();
        });
        function startLoadingSequence() {
            document.getElementById('loadingScreen').classList.remove('hidden');
            let progress = 0;
            const loadingBar = document.getElementById('loadingBar');
            const loadingInterval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress > 100) progress = 100;
                loadingBar.style.width = `${progress}%`;
                if (progress >= 100) {
                    clearInterval(loadingInterval);
                    setTimeout(() => {
                        document.getElementById('loadingScreen').classList.add('hidden');
                        document.getElementById('app').classList.remove('hidden');
                        updateProfileUI();
                        showPage('home');
                        listenForWithdrawalUpdates();
                        listenForNotifications();
                        loadUserNotifications();
                        listenForAnnouncements();
                        loadGlobalAnnouncements();
                        setupProfileListener();
                        listenForContactUpdates();
                        loadUserContactMessages();
                    }, 500);
                }
            }, 200);
        }
        function updateUI() {
            if (currentUser) {
                document.getElementById('currentUsername').textContent = `Ù…Ø±Ø­Ø¨Ø§Ù‹ ${currentUser.username}`;
                document.getElementById('points').textContent = currentUser.points.toLocaleString();
                document.getElementById('balance').textContent = currentUser.balance.toLocaleString();
            }
        }
        function showPage(page) {
            state.page = page;
            document.getElementById('content').innerHTML = pages[page];
            document.querySelectorAll('.nav-btn').forEach(btn => {
                if (btn.dataset.page === page) {
                    btn.className = 'nav-btn flex flex-col items-center gap-1 px-4 py-3 rounded-2xl transition-all bg-gradient-to-r from-blue-500 to-purple-600 shadow-lg shadow-blue-500/50 scale-110';
                    if (page === 'claim') {
                        btn.className = 'nav-btn flex flex-col items-center gap-1 px-4 py-3 rounded-2xl transition-all bg-gradient-to-r from-orange-500 to-pink-500 shadow-lg shadow-orange-500/50 scale-110';
                    } else if (page === 'referral') {
                        btn.className = 'nav-btn flex flex-col items-center gap-1 px-4 py-3 rounded-2xl transition-all bg-gradient-to-r from-purple-500 to-pink-500 shadow-lg shadow-purple-500/50 scale-110';
                    } else if (page === 'profile') {
                        btn.className = 'nav-btn flex flex-col items-center gap-1 px-4 py-3 rounded-2xl transition-all bg-gradient-to-r from-green-500 to-emerald-600 shadow-lg shadow-green-500/50 scale-110';
                    }
                } else {
                    btn.className = 'nav-btn flex flex-col items-center gap-1 px-4 py-3 rounded-2xl transition-all hover:bg-white/10';
                }
            });
            if (page === 'claim') {
                loadWithdrawalRequests();
            }
            if (page === 'profile') {
                loadProfileData();
                loadProfileNotifications();
            }
            if (page === 'home') {
                updateAdLimitInfo();
            }
        }
        async function loadWithdrawalRequests() {
            const requests = await getUserWithdrawalRequests();
            updateWithdrawalRequestsUI(requests);
        }
        function validateWithdraw() {
            const amount = parseInt(document.getElementById('withdrawAmount').value);
            const wallet = document.getElementById('walletAddress').value;
            const btn = document.getElementById('claimBtn');
            const amountError = document.getElementById('amountError');
            const walletError = document.getElementById('walletError');
            if (amount && amount % 1000 !== 0) {
                amountError.classList.remove('hidden');
            } else {
                amountError.classList.add('hidden');
            }
            if (wallet && wallet.length < 10) {
                walletError.classList.remove('hidden');
            } else {
                walletError.classList.add('hidden');
            }
            if (amount >= 1000 && amount % 1000 === 0 && amount <= currentUser.points && wallet && wallet.length >= 10) {
                btn.disabled = false;
                btn.className = 'w-full p-5 rounded-2xl font-bold text-xl shadow-2xl transform transition-all bg-gradient-to-r from-green-500 to-emerald-600 hover:scale-105 active:scale-95 shadow-green-500/50';
                const shibaAmount = (amount / 1000 * 3000).toLocaleString();
                btn.textContent = `Ø§Ø³Ø­Ø¨ ${amount.toLocaleString()} Ù†Ù‚Ø·Ø© â†’ ${shibaAmount} SHIBA ğŸ`;
            } else {
                btn.disabled = true;
                btn.className = 'w-full p-5 rounded-2xl font-bold text-xl shadow-2xl transform transition-all bg-gray-600 opacity-50 cursor-not-allowed';
                if (!amount || amount % 1000 !== 0) {
                    btn.textContent = 'Ø£Ø¯Ø®Ù„ Ù…Ø¨Ù„ØºØ§Ù‹ ØµØ­ÙŠØ­Ø§Ù‹';
                } else if (amount > currentUser.points) {
                    btn.textContent = 'Ù†Ù‚Ø§Ø· ØºÙŠØ± ÙƒØ§ÙÙŠØ©';
                } else if (!wallet || wallet.length < 10) {
                    btn.textContent = 'Ø£Ø¯Ø®Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø©';
                }
            }
        }
        async function handleClaim() {
            const amount = parseInt(document.getElementById('withdrawAmount').value);
            const wallet = document.getElementById('walletAddress').value;
            if (amount >= 1000 && amount % 1000 === 0 && amount <= currentUser.points && wallet && wallet.length >= 10) {
                const shibaAmount = amount / 1000 * 3000;
                const success = await submitWithdrawalRequest(amount, wallet, shibaAmount);
                if (success) {
                    currentUser.points -= amount;
                    const userRef = database.ref('users/' + currentUsername);
                    await userRef.update({ points: currentUser.points });
                    updateUI();
                    showToast('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø³Ø­Ø¨! Ø³ÙŠØªÙ… Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ù‚Ø±ÙŠØ¨Ø§Ù‹');
                    document.getElementById('withdrawAmount').value = '';
                    document.getElementById('walletAddress').value = '';
                    validateWithdraw();
                    loadWithdrawalRequests();
                } else {
                    showToast('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨', true);
                }
            }
        }
        function updateAdLimitInfo() {
            if (!currentUser) return;
            const adCount = getAdCountInLast12Hours(currentUser);
            const adLimitInfo = document.getElementById('adLimitInfo');
            const watchAdBtn = document.getElementById('watchAdBtn');
            if (adCount >= MAX_ADS_PER_12H) {
                adLimitInfo.textContent = `Ù„Ù‚Ø¯ ÙˆØµÙ„Øª Ù„Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰: ${adCount} / ${MAX_ADS_PER_12H} Ø¥Ø¹Ù„Ø§Ù†`;
                adLimitInfo.className = 'text-sm font-bold text-red-400';
                if (watchAdBtn) {
                    watchAdBtn.disabled = true;
                    watchAdBtn.classList.add('opacity-50', 'cursor-not-allowed');
                }
            } else {
                adLimitInfo.textContent = `Ù„Ù‚Ø¯ Ø´Ø§Ù‡Ø¯Øª ${adCount} Ù…Ù† ${MAX_ADS_PER_12H} Ø¥Ø¹Ù„Ø§Ù† Ø®Ù„Ø§Ù„ Ø¢Ø®Ø± 12 Ø³Ø§Ø¹Ø©`;
                adLimitInfo.className = 'text-sm font-bold text-green-400';
                if (watchAdBtn) {
                    watchAdBtn.disabled = false;
                    watchAdBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                }
            }
        }
        function copyReferral() {
            showToast('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·! ğŸ“‹');
        }
        function showToast(message, isError = false) {
            const toast = document.getElementById('toast');
            const toastMsg = document.getElementById('toastMsg');
            toastMsg.textContent = message;
            if (isError) {
                toast.className = 'fixed top-8 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-red-500 to-pink-600 px-8 py-4 rounded-2xl shadow-2xl shadow-red-500/50 z-50 animate-bounce-custom';
            } else {
                toast.className = 'fixed top-8 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-green-500 to-emerald-600 px-8 py-4 rounded-2xl shadow-2xl shadow-green-500/50 z-50 animate-bounce-custom';
            }
            toast.classList.remove('hidden');
            setTimeout(() => {
                toast.classList.add('hidden');
            }, 3000);
        }
        async function refreshAdLimit() {
            if (!currentUsername) return;
            const btn = document.getElementById('refreshAdBtn');
            const originalSVG = btn.innerHTML;
            btn.disabled = true;
            btn.innerHTML = `<svg class="w-4 h-4 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>`;
            try {
                const userData = await getUserFromFirebase(currentUsername);
                if (userData) {
                    currentUser = userData;
                    updateAdLimitInfo();
                    showToast('ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø¨Ù†Ø¬Ø§Ø­!');
                }
            } catch (error) {
                console.error('Error refreshing ad limit:', error);
                showToast('âŒ ÙØ´Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ«', true);
            } finally {
                setTimeout(() => {
                    btn.disabled = false;
                    btn.innerHTML = originalSVG;
                }, 500);
            }
        }
    </script>
</body>
</html>
